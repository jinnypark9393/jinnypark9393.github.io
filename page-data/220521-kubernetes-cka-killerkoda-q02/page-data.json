{"componentChunkName":"component---src-templates-blog-template-js","path":"/220521-kubernetes-cka-killerkoda-q02/","result":{"data":{"cur":{"id":"52e45724-be66-57a0-8ddc-2f2bac432930","html":"<h1 id=\"q2-apiμ„λ²„-μ¥μ• \" style=\"position:relative;\"><a href=\"#q2-api%EC%84%9C%EB%B2%84-%EC%9E%A5%EC%95%A0\" aria-label=\"q2 apiμ„λ²„ μ¥μ•  permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Q2. APIμ„λ²„ μ¥μ• </h1>\n<p>μ΄ μ‹¤μµμ—μ„λ” APIμ„λ²„κ°€ μ—¬λ¬ λ°©μ‹μΌλ΅ λ§κ°€μ§€λ„λ΅ μλ» μ„¤μ •ν• λ’¤, μ—λ¬λ¥Ό ν™•μΈν•  μ μλ” λ΅κ·Έ κ²½λ΅λ¥Ό ν™•μΈν•λ‹¤.</p>\n<br/>\n<p>λ‹Ήμ‹ μ€ APIμ„λ²„κ°€ μ¬λΌμ¤μ§€ μ•λ” μƒν™©μ— μµμ™ν•΄μ Έμ•Ό ν•λ‹¤.</p>\n<br/>\n<p>APIμ„λ²„ λ§¤λ‹νμ¤νΈ νμΌμ— <code class=\"language-text\">β€”-this-is-very-wrong</code> μ΄λΌλ” μ‹ κ· μΈμ(argument)λ¥Ό μ„¤μ •ν•μ. νλ“κ°€ λ‹¤μ‹ μ¬λΌμ¤λ”μ§€ ν™•μΈν•κ³ , μ΄ μ„¤μ •μ΄ μ–΄λ–¤ λ΅κ·Έλ¥Ό λ°μƒμ‹ν‚¤λ”μ§€ ν™•μΈν•μ.</p>\n<br/>\n<h2 id=\"λ΅κ·Έ-κ²½λ΅\" style=\"position:relative;\"><a href=\"#%EB%A1%9C%EA%B7%B8-%EA%B2%BD%EB%A1%9C\" aria-label=\"λ΅κ·Έ κ²½λ΅ permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>λ΅κ·Έ κ²½λ΅</h2>\n<p>μ•„λλ” ν™•μΈν•΄μ•Όν•  λ΅κ·Έ κ²½λ΅μ΄λ‹¤.</p>\n<ul>\n<li><code class=\"language-text\">/var/log/pods</code></li>\n<li><code class=\"language-text\">/var/log/containers</code></li>\n<li><code class=\"language-text\">crictl ps</code> + <code class=\"language-text\">crictl logs</code></li>\n<li><code class=\"language-text\">docker ps</code> + <code class=\"language-text\">docker logs</code> (μ»¨ν…μ΄λ„ λ°νƒ€μ„μΌλ΅ λ„μ»¤λ¥Ό μ‚¬μ©ν•  κ²½μ°)</li>\n<li>Kubelet λ΅κ·Έ: <code class=\"language-text\">/var/log/syslog</code> νΉμ€ <code class=\"language-text\">journalctl</code></li>\n</ul>\n<br/>\n<h2 id=\"ν•΄κ²°-λ°©λ²•\" style=\"position:relative;\"><a href=\"#%ED%95%B4%EA%B2%B0-%EB%B0%A9%EB%B2%95\" aria-label=\"ν•΄κ²° λ°©λ²• permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>ν•΄κ²° λ°©λ²•</h2>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"># ν•­μƒ λ°±μ—…μ„ μƒμ„±ν•μ<span class=\"token operator\">!</span>\ncp <span class=\"token operator\">/</span>etc<span class=\"token operator\">/</span>kubernetes<span class=\"token operator\">/</span>manifests<span class=\"token operator\">/</span>kube<span class=\"token operator\">-</span>apiserver<span class=\"token punctuation\">.</span>yaml\n\n# λ³€κ²½ μ‚¬ν•­μ„ μ μ©ν•μ\nvim <span class=\"token operator\">/</span>etc<span class=\"token operator\">/</span>kubernetes<span class=\"token operator\">/</span>manifests<span class=\"token operator\">/</span>kube<span class=\"token operator\">-</span>apiserver<span class=\"token punctuation\">.</span>yaml\n\n# μ»¨ν…μ΄λ„κ°€ μ¬μ‹μ‘ν• λ•κΉμ§€ κΈ°λ‹¤λ¦¬μ\nwatch crictl ps\n\n# <span class=\"token constant\">API</span> μ„λ²„ νλ“λ¥Ό ν™•μΈν•μ\nk <span class=\"token operator\">-</span>n kube<span class=\"token operator\">-</span>system <span class=\"token keyword\">get</span> pod</code></pre></div>\n<br/>\n<ul>\n<li>API μ„λ²„κ°€ λμ•„μ¤μ§€ μ•λ”λ‹¤.</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"># νλ“ λ΅κ·Έλ¥Ό ν™•μΈν•λ‹¤\n\ncat <span class=\"token operator\">/</span><span class=\"token keyword\">var</span><span class=\"token operator\">/</span>log<span class=\"token operator\">/</span>pods<span class=\"token operator\">/</span>kube<span class=\"token operator\">-</span>system_kube<span class=\"token operator\">-</span>apiserver<span class=\"token operator\">-</span>controlplane_<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>hashed</span> <span class=\"token attr-name\">value</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">/kube-apiserver/X.log\n> 2022-01-26T10:41:12.401641185Z stderr F Error: unknown flag: --this-is-very-wrong</span></code></pre></div>\n<br/>\n<p>λ³€κ²½μ‚¬ν•­μ„ μ·¨μ†ν•κ³  λ‹¤μ μ‹¤μµμΌλ΅ λ„μ–΄κ°€μ.</p>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"># λ°±μ—…μ„ μ‚¬μ©ν•λ©΄ νΈλ¦¬ν•λ‹¤\ncp <span class=\"token operator\">~</span><span class=\"token operator\">/</span>kube<span class=\"token operator\">-</span>apiserver<span class=\"token punctuation\">.</span>yaml<span class=\"token punctuation\">.</span>ori <span class=\"token operator\">/</span>etc<span class=\"token operator\">/</span>kuberentes<span class=\"token operator\">/</span>manifests<span class=\"token operator\">/</span>kube<span class=\"token operator\">-</span>apiserver<span class=\"token punctuation\">.</span>yaml</code></pre></div>\n<br/>","excerpt":"Q2. APIμ„λ²„ μ¥μ•  μ΄ μ‹¤μµμ—μ„λ” APIμ„λ²„κ°€ μ—¬λ¬ λ°©μ‹μΌλ΅ λ§κ°€μ§€λ„λ΅ μλ» μ„¤μ •ν• λ’¤, μ—λ¬λ¥Ό ν™•μΈν•  μ μλ” λ΅κ·Έ κ²½λ΅λ¥Ό ν™•μΈν•λ‹¤. λ‹Ήμ‹ μ€ APIμ„λ²„κ°€ μ¬λΌμ¤μ§€ μ•λ” μƒν™©μ— μµμ™ν•΄μ Έμ•Ό ν•λ‹¤. APIμ„λ²„ λ§¤λ‹νμ¤νΈ νμΌμ—  μ΄λΌλ” μ‹ κ· μΈμ(argument)λ¥Ό μ„¤μ •ν•μ. νλ“κ°€ λ‹¤μ‹ μ¬λΌμ¤λ”μ§€ ν™•μΈν•κ³ , μ΄ μ„¤μ •μ΄ μ–΄λ–¤ λ΅κ·Έλ¥Ό λ°μƒμ‹ν‚¤λ”μ§€ ν™•μΈν•μ. λ΅κ·Έ κ²½λ΅ μ•„λλ” ν™•μΈν•΄μ•Όν•  λ΅κ·Έ κ²½λ΅μ΄λ‹¤.    +   +  (μ»¨ν…μ΄λ„ λ°νƒ€μ„μΌλ΅ λ„μ»¤λ¥Ό μ‚¬μ©ν•  κ²½μ°) Kubelet λ΅κ·Έ:  νΉμ€  ν•΄κ²° λ°©λ²• API μ„λ²„κ°€ λμ•„μ¤μ§€ μ•λ”λ‹¤. λ³€κ²½μ‚¬ν•­μ„ μ·¨μ†ν•κ³  λ‹¤μ μ‹¤μµμΌλ΅ λ„μ–΄κ°€μ.","frontmatter":{"date":"May 21, 2022","title":"μΏ λ²„λ„¤ν‹°μ¤(Kubernetes) CKA - KillerKoda Q2. Apiserver Crash","categories":"λ°λΈμµμ¤","author":"jinnypark9393","emoji":"π”§"},"fields":{"slug":"/220521-kubernetes-cka-killerkoda-q02/"}},"next":{"id":"07935aa2-28c6-5f17-8f64-61be4c374f6e","html":"<h1 id=\"μ -2μ¥-λ³€μμ™€-λ°°μ—΄\" style=\"position:relative;\"><a href=\"#%EC%A0%9C-2%EC%9E%A5-%EB%B3%80%EC%88%98%EC%99%80-%EB%B0%B0%EC%97%B4\" aria-label=\"μ  2μ¥ λ³€μμ™€ λ°°μ—΄ permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>μ  2μ¥ λ³€μμ™€ λ°°μ—΄</h1>\n<h2 id=\"16-λ°°μ—΄μ-κ°-μ”μ†λ”-μ”μ†-λ²νΈλΌλ”-λ²νΈλ΅-κµ¬λ¶„ν•λ‹¤\" style=\"position:relative;\"><a href=\"#16-%EB%B0%B0%EC%97%B4%EC%9D%98-%EA%B0%81-%EC%9A%94%EC%86%8C%EB%8A%94-%EC%9A%94%EC%86%8C-%EB%B2%88%ED%98%B8%EB%9D%BC%EB%8A%94-%EB%B2%88%ED%98%B8%EB%A1%9C-%EA%B5%AC%EB%B6%84%ED%95%9C%EB%8B%A4\" aria-label=\"16 λ°°μ—΄μ κ° μ”μ†λ” μ”μ† λ²νΈλΌλ” λ²νΈλ΅ κµ¬λ¶„ν•λ‹¤ permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>16. λ°°μ—΄μ κ° μ”μ†λ” μ”μ† λ²νΈλΌλ” λ²νΈλ΅ κµ¬λ¶„ν•λ‹¤</h2>\n<ul>\n<li><strong>λ°°μ—΄ μ”μ†</strong>: λ°°μ—΄μ„ κµ¬μ„±ν•λ” β€μƒμβ€™</li>\n<li><strong>μ”μ† λ²νΈ</strong>: μ²« λ²μ§Έ λ°°μ—΄ μ”μ†λ¶€ν„° λ§μ§€λ§‰ λ°°μ—΄ μ”μ†κΉμ§€ μΌλ ¨λ²νΈλ¥Ό λ¶™μ—¬ μ–΄λ–¤ λ°°μ—΄μ”μ†μ— λ°μ΄ν„°λ¥Ό λ„£μ„μ§€ μ„ νƒν•κ±°λ‚, μ–΄λ–¤ λ°°μ—΄ μ”μ†μ λ°μ΄ν„°λ¥Ό μ°Έμ΅°ν•  μ§€ μ§€μ •.</li>\n<li>μ”μ† λ²νΈμ μ‹μ¤ν…μ€ 2κ°€μ§€ μ΅΄μ¬\n<ul>\n<li>\n<p><strong>BASE 0</strong></p>\n<p>: 1λ²μ§Έ μ”μ† λ²νΈ 0, λ§μ§€λ§‰ μ”μ† λ²νΈ N-1</p>\n</li>\n<li>\n<p><strong>BASE 1</strong></p>\n<p>: 1λ²μ§Έ μ”μ† λ²νΈ 1, λ§μ§€λ§‰ μ”μ† λ²νΈ N</p>\n</li>\n</ul>\n</li>\n<li><strong>μ²¨μ</strong>: λ°°μ—΄μ νΉμ • μ”μ†μ— μ ‘κ·Όν•κΈ° μ„ν•΄ λ°°μ—΄λ…κ³Ό μ”μ† λ²νΈλ¥Ό μ΅°ν•©ν•΄ κ°€λ¦¬ν‚¤λ” κ²ƒ</li>\n<li>λ°°μ—΄λ…[μ”μ† λ²νΈ]\n<ul>\n<li>λ°°μ—΄λ…(μ”μ† λ²νΈ)</li>\n<li>μ: ARRAY[0] β‡’ ARRAYλΌλ” λ°°μ—΄μ μ²«λ²μ§Έ μ”μ†λ¥Ό κ°€λ¦¬ν‚¤λ” κ²ƒ</li>\n</ul>\n</li>\n</ul>\n<h2 id=\"15-λ°°μ—΄μ€-κ΄€λ ¨λ-κ°’μ„-ν¨μ¨μ μΌλ΅-μ €μ¥ν•κΈ°-μ„ν•-μ‚¬λ¬Όν•¨μ΄λ‹¤\" style=\"position:relative;\"><a href=\"#15-%EB%B0%B0%EC%97%B4%EC%9D%80-%EA%B4%80%EB%A0%A8%EB%90%9C-%EA%B0%92%EC%9D%84-%ED%9A%A8%EC%9C%A8%EC%A0%81%EC%9C%BC%EB%A1%9C-%EC%A0%80%EC%9E%A5%ED%95%98%EA%B8%B0-%EC%9C%84%ED%95%9C-%EC%82%AC%EB%AC%BC%ED%95%A8%EC%9D%B4%EB%8B%A4\" aria-label=\"15 λ°°μ—΄μ€ κ΄€λ ¨λ κ°’μ„ ν¨μ¨μ μΌλ΅ μ €μ¥ν•κΈ° μ„ν• μ‚¬λ¬Όν•¨μ΄λ‹¤ permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>15. λ°°μ—΄μ€ κ΄€λ ¨λ κ°’μ„ ν¨μ¨μ μΌλ΅ μ €μ¥ν•κΈ° μ„ν• μ‚¬λ¬Όν•¨μ΄λ‹¤</h2>\n<ul>\n<li>μ μ€ μ–‘μ λ°μ΄ν„°λ” λ³€μλ΅ κ΄€λ¦¬ κ°€λ¥ν•μ§€λ§ λ§μ€ μ–‘μ λ°μ΄ν„°λ¥Ό μƒμ„±ν•λ ¤λ©΄ κ·Έ μλ§νΌμ λ³€μλ¥Ό μƒμ„±ν•΄μ•Ό ν•λ―€λ΅ λΉ„ν¨μ¨μ  β‡’ λ°°μ—΄λ΅ κ΄€λ¦¬</li>\n<li>λ°°μ—΄λ΅ λ°μ΄ν„°λ¥Ό κ΄€λ¦¬ν•λ©΄ λ°μ΄ν„°μ μ–‘μ΄ μ¦κ°€ν•λ”λΌλ„ λ°°μ—΄ μ”μ†μλ¥Ό λλ ¤ λ€μ‘ν•  μ μλ‹¤.</li>\n</ul>\n<h2 id=\"18-2μ°¨μ›-λ°°μ—΄μ€-νΈν…”μ-κ°μ‹¤-κ°™μ€-κ²ƒ\" style=\"position:relative;\"><a href=\"#18-2%EC%B0%A8%EC%9B%90-%EB%B0%B0%EC%97%B4%EC%9D%80-%ED%98%B8%ED%85%94%EC%9D%98-%EA%B0%9D%EC%8B%A4-%EA%B0%99%EC%9D%80-%EA%B2%83\" aria-label=\"18 2μ°¨μ› λ°°μ—΄μ€ νΈν…”μ κ°μ‹¤ κ°™μ€ κ²ƒ permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>18. 2μ°¨μ› λ°°μ—΄μ€ νΈν…”μ κ°μ‹¤ κ°™μ€ κ²ƒ</h2>\n<ul>\n<li>\n<p>1μ°¨μ› λ°°μ—΄: μΌμ§μ„  μƒμ—μ„ λ‚μ—΄ν• μ‚¬λ¬Όν•¨κ°™μ€ λ°°μ—΄(λ°°μ—΄ μ”μ†λ¥Ό μ”μ†λ²νΈ ν•λ‚λ΅ κ°€λ¦¬ν‚¬ μ μμ)</p>\n</li>\n<li>\n<p>2μ°¨μ› λ°°μ—΄: λ³€μλ¥Ό κ°€λ΅μ„Έλ΅ λΉν‹μ—†μ΄ λ‚μ—΄ν• κ²ƒ(μ—‘μ…€μ ν‘μ™€ μ μ‚¬)</p>\n</li>\n<li>\n<p>2μ°¨μ› λ°°μ—΄, 3μ°½μ› λ°°μ—΄ λ“±μ„ μΆ…ν•©ν•΄ λ‹¤μ°¨μ› λ°°μ—΄μ΄λΌ λ¶€λ¥Έλ‹¤.</p>\n</li>\n<li>\n<p>μ£Όμ: 2μ°¨μ› λ°°μ—΄μ€ λ°λ“μ‹ β€μƒμβ€™κ°€ μ§μ‚¬κ°ν• λ¨μ–‘μΌλ΅ λΉν‹μ—†μ΄ μ •λ ¬λ ν•νƒμ—¬μ•Όν•λ‹¤(<strong>λ§¤ ν–‰λ§λ‹¤ μ—΄μ κ°μκ°€ λ°λ“μ‹ λ™μΌν•΄μ•Όν•λ‹¤</strong>)</p>\n</li>\n</ul>\n<p><br/><br/></p>","frontmatter":{"date":"May 20, 2022","title":"κ·Έλ¦ΌμΌλ΅ λ°°μ°λ” μ•κ³ λ¦¬μ¦ μ  2μ¥ - λ³€μμ™€ λ°°μ—΄(6)","categories":"μ•κ³ λ¦¬μ¦","author":"jinnypark9393","emoji":"π¤–"},"fields":{"slug":"/220520-algorithm-book-with-pic/"}},"prev":{"id":"a5c12afd-e238-5c1f-a28f-626c4cf43941","html":"<h1 id=\"q3-apiμ„λ²„-μ„¤μ •-μ¤λ¥\" style=\"position:relative;\"><a href=\"#q3-api%EC%84%9C%EB%B2%84-%EC%84%A4%EC%A0%95-%EC%98%A4%EB%A5%98\" aria-label=\"q3 apiμ„λ²„ μ„¤μ • μ¤λ¥ permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Q3. APIμ„λ²„ μ„¤μ • μ¤λ¥</h1>\n<p>λ¨Όμ €, APIμ„λ²„ μ¥μ•  μ‹¤μµμ„ ν’€μ§€ μ•μ•λ‹¤λ©΄ ν’€κ³  μ¤λ„λ΅ ν•μ.</p>\n<br/>\n<p>API μ„λ²„κ°€ μ¬λΌμ¤μ§€ μ•λ” μƒν™©μ΄λ‹¤. λ§¤λ‹νμ¤νΈ νμΌμ 3κ³³μ΄ μλ» μ„¤μ •λμ–΄μλ‹¤. μ—λ¬λ¥Ό μμ •ν•μ.</p>\n<p><br/><br/></p>\n<h2 id=\"λ΅κ·Έ-κ²½λ΅\" style=\"position:relative;\"><a href=\"#%EB%A1%9C%EA%B7%B8-%EA%B2%BD%EB%A1%9C\" aria-label=\"λ΅κ·Έ κ²½λ΅ permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>λ΅κ·Έ κ²½λ΅</h2>\n<p>ν™•μΈν•΄μ•Όν•  λ΅κ·Έ κ²½λ΅λ” μ•„λμ™€ κ°™λ‹¤.</p>\n<ul>\n<li><code class=\"language-text\">/var/log/pods</code></li>\n<li><code class=\"language-text\">/var/log/containers</code></li>\n<li><code class=\"language-text\">crictl ps</code> + <code class=\"language-text\">crictl logs</code></li>\n<li><code class=\"language-text\">docker ps</code> + <code class=\"language-text\">docker logs</code> (λ„μ»¤κ°€ μ‚¬μ©λ  κ²½μ°)</li>\n<li>kubelet λ΅κ·Έ: <code class=\"language-text\">/var/log/syslog</code> νΉμ€ <code class=\"language-text\">journalctl</code></li>\n</ul>\n<p><br/><br/></p>\n<h2 id=\"μ΄μ\" style=\"position:relative;\"><a href=\"#%EC%9D%B4%EC%8A%88\" aria-label=\"μ΄μ permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>μ΄μ</h2>\n<p>λ³€κ²½μ‚¬ν•­μ„ μ μ©ν•κΈ° μ„ν•΄ λ‹¤μμ μ‘μ—…μ„ ν•΄μ•Όν•  μ μλ‹¤.</p>\n<ol>\n<li><code class=\"language-text\">kube-apiserver.yaml</code> νμΌμ„ manifests λ””λ ‰ν† λ¦¬μ—μ„ λΊ€λ‹¤</li>\n<li>API μ„λ²„ μ»¨ν…μ΄λ„κ°€ μ‚¬λΌμ§λ•κΉμ§€ κΈ°λ‹¤λ¦°λ‹¤ (<code class=\"language-text\">watch crictl ps</code> )</li>\n<li>λ§¤λ‹νμ¤νΈ νμΌμ„ λ‹¤μ‹ λλ ¤λ†“μ€ λ’¤ apiμ„λ²„κ°€ λμ•„μ¬ λ•κΉμ§€ κΈ°λ‹¤λ¦°λ‹¤.</li>\n</ol>\n<p>μΌλ¶€ μ μ €λ“¤μ΄ kubeletμ„ μ¬μ‹μ‘ν•΄μ•Όν–λ‹¤κ³  λ³΄κ³  ν–μΌλ‚(<code class=\"language-text\">service kubelet restart</code>) μ΄λ΅ μƒμΌλ΅λ” ν•„μ”μ—†λ‹¤.</p>\n<p><br/><br/></p>\n<h2 id=\"ν•΄κ²°-λ°©λ²•-1\" style=\"position:relative;\"><a href=\"#%ED%95%B4%EA%B2%B0-%EB%B0%A9%EB%B2%95-1\" aria-label=\"ν•΄κ²° λ°©λ²• 1 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>ν•΄κ²° λ°©λ²• 1</h2>\n<p>Kubeletμ΄ νλ“/μ»¨ν…μ΄λ„λ¥Ό μ‹μ‘λ„ μƒμ„±ν•μ§€λ„ λ»ν•κ³  μλ‹¤. Kubeletλ΅κ·Έλ¥Ό syslogλ΅ ν™•μΈν•΄λ³΄μ.</p>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\">cat <span class=\"token operator\">/</span><span class=\"token keyword\">var</span><span class=\"token operator\">/</span>log<span class=\"token operator\">/</span>syslog <span class=\"token operator\">|</span> grep kube<span class=\"token operator\">-</span>apiserver</code></pre></div>\n<br/>\n<ul>\n<li>manifestνμΌμ metadata λ¶€λ¶„μ— μ¤νƒ€κ°€ μλ‹¤\n<ul>\n<li><code class=\"language-text\">metadata;</code> λ¥Ό <code class=\"language-text\">metadata:</code> λ΅ μμ •ν•΄μ¤€λ‹¤.</li>\n</ul>\n</li>\n</ul>\n<p><br/><br/></p>\n<h2 id=\"ν•΄κ²°-λ°©λ²•-2\" style=\"position:relative;\"><a href=\"#%ED%95%B4%EA%B2%B0-%EB%B0%A9%EB%B2%95-2\" aria-label=\"ν•΄κ²° λ°©λ²• 2 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>ν•΄κ²° λ°©λ²• 2</h2>\n<p>μλ»λ YAMLμ„ μμ •ν• λ’¤μ—λ„ μ—¬μ „ν ν‹€λ„μλ»λ νλΌλ―Έν„°λ΅ μ΄μκ°€ μλ” λ“― ν•λ‹¤.</p>\n<ul>\n<li><code class=\"language-text\">/var/log/pods</code> μ— μλ” λ΅κ·Έλ¥Ό ν™•μΈν•μ.</li>\n<li>μ—λ¬: <code class=\"language-text\">Error: unknown flag: β€”authorization-modus</code></li>\n<li>λ§λ” νλΌλ―Έν„°: <code class=\"language-text\">β€”authorization-mode</code></li>\n</ul>\n<p><br/><br/></p>\n<h2 id=\"ν•΄κ²°-λ°©λ²•-3\" style=\"position:relative;\"><a href=\"#%ED%95%B4%EA%B2%B0-%EB%B0%A9%EB%B2%95-3\" aria-label=\"ν•΄κ²° λ°©λ²• 3 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>ν•΄κ²° λ°©λ²• 3</h2>\n<p>νλΌλ―Έν„°λ¥Ό κ³ μΉ λ’¤, νλ“/μ»¨ν…μ΄λ„λ” upλμ—μ„ μ μμ§€λ§, νλ“κ°€ μ¬μ‹μ‘(restart) λλ” ν„μƒμ΄ λ°μƒν•λ‹¤.</p>\n<br/>\n<p>μ»¨ν…μ΄λ„ λ΅κ·Έλ¥Ό ν™•μΈν•κ±°λ‚ <code class=\"language-text\">/var/log/pods</code> λ¥Ό ν™•μΈν•λ©΄ μ•„λλ¥Ό μ°Ύμ„ μ μλ‹¤.</p>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\">Error <span class=\"token keyword\">while</span> dialing dial tcp <span class=\"token number\">127.0</span><span class=\"token number\">.0</span><span class=\"token number\">.1</span><span class=\"token operator\">:</span><span class=\"token number\">23000</span><span class=\"token operator\">:</span> connect<span class=\"token operator\">:</span>connection refused</code></pre></div>\n<br/>\n<p>μ»¨ν…μ΄λ„ λ΅κ·Έλ¥Ό ν™•μΈν•μ: ETCD μ—°κ²°μ΄ μλ»λ λ“― ν•λ‹¤. ETCDκ°€ λ™μ‘ν•λ” μ¬λ°”λ¥Έ ν¬νΈλ¥Ό μ„¤μ •ν•μ(ν¬νΈ λ²νΈλ” ETCD λ§¤λ‹νμ¤νΈλ¥Ό ν™•μΈν•μ).</p>\n<br/>\n<p>μ„¤μ •κ°’μ€ <code class=\"language-text\">β€”etcd-servers=https://127.0.0.1:2379</code> μ—¬μ•Ό ν•λ‹¤(μμ„Έν• λ‚΄μ©μ€ μΏ λ²„λ„¤ν‹°μ¤ κ³µμ‹λ¬Έμ„μ Ports and Protocols λ¬Έμ„λ¥Ό ν™•μΈν•μ).</p>\n<br/>","frontmatter":{"date":"May 21, 2022","title":"μΏ λ²„λ„¤ν‹°μ¤(Kubernetes) CKA - KillerKoda Q3. Apiserver Misconfigured","categories":"λ°λΈμµμ¤","author":"jinnypark9393","emoji":"π”§"},"fields":{"slug":"/220521-kubernetes-cka-killerkoda-q03/"}},"site":{"siteMetadata":{"siteUrl":"https://jinnypark9393.github.io","comments":{"utterances":{"repo":"jinnypark9393/jinnypark9393.github.io"}}}}},"pageContext":{"slug":"/220521-kubernetes-cka-killerkoda-q02/","nextSlug":"/220520-algorithm-book-with-pic/","prevSlug":"/220521-kubernetes-cka-killerkoda-q03/"}},"staticQueryHashes":["1073350324","1956554647","2938748437"]}