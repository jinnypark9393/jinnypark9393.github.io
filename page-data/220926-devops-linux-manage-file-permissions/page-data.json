{"componentChunkName":"component---src-templates-blog-template-js","path":"/220926-devops-linux-manage-file-permissions/","result":{"data":{"cur":{"id":"17af9af4-1831-546e-85b5-63f94d40aa22","html":"<h1 id=\"managing-file-permissions\" style=\"position:relative;\"><a href=\"#managing-file-permissions\" aria-label=\"managing file permissions permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Managing File Permissions</h1>\n<ul>\n<li>Authentication vs. Authorization\n<ul>\n<li><a href=\"https://learn.microsoft.com/ko-kr/azure/active-directory/develop/authentication-vs-authorization\">https://learn.microsoft.com/ko-kr/azure/active-directory/develop/authentication-vs-authorization</a></li>\n</ul>\n</li>\n</ul>\n<h2 id=\"1-permission-정보-보기\" style=\"position:relative;\"><a href=\"#1-permission-%EC%A0%95%EB%B3%B4-%EB%B3%B4%EA%B8%B0\" aria-label=\"1 permission 정보 보기 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>1. Permission 정보 보기</h2>\n<ul>\n<li>permission, 허락, 권한을 뜻하는 말(나무위키)</li>\n<li>리눅스 시스템에서는 파일이나 디렉토리에 사용자들이 접근할 수 있는 권한을 할당해서 운영\n<ul>\n<li>\n<p>파일 소유자, 그룹 멤버들, 그 외 사용자들</p>\n</li>\n<li>\n<p>read, write, execute</p>\n<table>\n<thead>\n<tr>\n<th></th>\n<th>file</th>\n<th>directory</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>read(r)</td>\n<td>파일의 내용을 읽기(cat, more, less…)</td>\n<td>디렉토리 내용을 읽기(ls)</td>\n</tr>\n<tr>\n<td>write(w)</td>\n<td>파일의 내용을 변경</td>\n<td>디렉토리 내용을 변경</td>\n</tr>\n<tr>\n<td>execute(x)</td>\n<td>파일을 프로그램으로 실행</td>\n<td>디렉토리 안에 저장된 파일의 세부 속성 확인</td>\n</tr>\n<tr>\n<td>현재 작업 디렉토리로 설정 가능</td>\n<td></td>\n<td></td>\n</tr>\n</tbody>\n</table>\n</li>\n<li>\n<p>파일의 permission 보기</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">root@ubuntu:~<span class=\"token comment\"># ls -al</span>\ntotal <span class=\"token number\">28</span>\ndrwx------  <span class=\"token number\">5</span> root root <span class=\"token number\">4096</span> Sep <span class=\"token number\">20</span> <span class=\"token number\">23</span>:58 <span class=\"token builtin class-name\">.</span>\ndrwxr-xr-x <span class=\"token number\">20</span> root root <span class=\"token number\">4096</span> Sep <span class=\"token number\">16</span> <span class=\"token number\">16</span>:52 <span class=\"token punctuation\">..</span>\n-rw-r--r--  <span class=\"token number\">1</span> root root <span class=\"token number\">3106</span> Dec  <span class=\"token number\">5</span>  <span class=\"token number\">2019</span> .bashrc\ndrwx------  <span class=\"token number\">2</span> root root <span class=\"token number\">4096</span> Feb <span class=\"token number\">23</span>  <span class=\"token number\">2022</span> .cache\n-rw-r--r--  <span class=\"token number\">1</span> root root  <span class=\"token number\">161</span> Dec  <span class=\"token number\">5</span>  <span class=\"token number\">2019</span> .profile\ndrwx------  <span class=\"token number\">2</span> root root <span class=\"token number\">4096</span> Sep <span class=\"token number\">20</span> <span class=\"token number\">23</span>:58 .ssh\ndrwx------  <span class=\"token number\">3</span> root root <span class=\"token number\">4096</span> Sep <span class=\"token number\">15</span> <span class=\"token number\">17</span>:27 snap</code></pre></div>\n<ul>\n<li>d로 시작 → 디렉토리 / 그 외 문자로 시작 → 파일 (이 중 -로 시작하면 일반 파일)</li>\n<li>다음 9문자: (소유자 권한 3문자) (소유 그룹 권한 3문자) (그 외 사용자 권한 3문자)</li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n<h2 id=\"2-permission-변경-명령어-chmod-mode-filename\" style=\"position:relative;\"><a href=\"#2-permission-%EB%B3%80%EA%B2%BD-%EB%AA%85%EB%A0%B9%EC%96%B4-chmod-mode-filename\" aria-label=\"2 permission 변경 명령어 chmod mode filename permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>2. Permission 변경 명령어: chmod [Mode] filename</h2>\n<ul>\n<li>\n<p>파일이나 디렉토리의 퍼미션을 설정할 때 사용하는 명령어</p>\n</li>\n<li>\n<p>symbolic representation</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">chmod</span> <span class=\"token punctuation\">[</span>mode: 누가 무엇을<span class=\"token punctuation\">]</span> <span class=\"token punctuation\">[</span>file/directory<span class=\"token punctuation\">]</span>\n<span class=\"token function\">chmod</span> u+w file.txt</code></pre></div>\n<ul>\n<li>symbolic mode를 사용하면 누구에게 어떤 퍼미션을 부여할 지 알기 쉬움.</li>\n<li>+: 할당 / -: 제거 / =: 기존 설정 무시하고 새로 덮어쓰기</li>\n</ul>\n</li>\n<li>\n<p>numerical representation</p>\n<ul>\n<li>\n<p>8진수 모드</p>\n</li>\n<li>\n<p>표현 값</p>\n<table>\n<thead>\n<tr>\n<th>의미</th>\n<th>숫자</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>읽기(r)</td>\n<td>4</td>\n</tr>\n<tr>\n<td>쓰기(w)</td>\n<td>2</td>\n</tr>\n<tr>\n<td>실행(x)</td>\n<td>1</td>\n</tr>\n</tbody>\n</table>\n</li>\n<li>\n<p>example</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">chmod</span> <span class=\"token number\">640</span> file.txt <span class=\"token operator\">==</span> <span class=\"token function\">chmod</span> rw-r----- file.txt\n<span class=\"token function\">chmod</span> <span class=\"token number\">775</span> file.txt <span class=\"token operator\">==</span> <span class=\"token function\">chmod</span> rwxrwxr-x file.txt</code></pre></div>\n</li>\n</ul>\n</li>\n</ul>\n<br/>","excerpt":"Managing File Permissions Authentication vs. Authorization https://learn.microsoft.com/ko-kr/azure/active-directory/develop/authentication-vs-authorization 1. Permission 정보 보기 permission, 허락, 권한을 뜻하는 말(나무위키) 리눅스 시스템에서는 파일이나 디렉토리에 사용자들이 접근할 수 있는 권한을 할당해서 운영 파일 소유자, 그룹 멤버들, 그 외 사용자들 read, write, execute  file directory read(r) 파일의 내용을 읽기(cat, more, less…) 디렉토리 내용을 읽기(ls) write(w) 파일의 내용을 변경 디렉토리 내용을 변경 execute(x) 파일을 프로그램으로 실행 디렉토리 안에 저장된 파일의 세부 속성 확인 현재 작업 디렉토리로 설정 가능 파일의 permission 보기 d로 시작 → 디…","frontmatter":{"date":"September 26, 2022","title":"리눅스(Linux) Managing File Permissions","categories":"데브옵스","author":"jinnypark9393","emoji":"💫"},"fields":{"slug":"/220926-devops-linux-manage-file-permissions/"}},"next":{"id":"3a56ac26-c0c7-5d8e-b376-aeb88cfb1496","html":"<h1 id=\"password-administration\" style=\"position:relative;\"><a href=\"#password-administration\" aria-label=\"password administration permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Password Administration</h1>\n<h2 id=\"1-password-관련-설정파일\" style=\"position:relative;\"><a href=\"#1-password-%EA%B4%80%EB%A0%A8-%EC%84%A4%EC%A0%95%ED%8C%8C%EC%9D%BC\" aria-label=\"1 password 관련 설정파일 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>1. Password 관련 설정파일</h2>\n<h3 id=\"1-1-password-관련-설정-파일\" style=\"position:relative;\"><a href=\"#1-1-password-%EA%B4%80%EB%A0%A8-%EC%84%A4%EC%A0%95-%ED%8C%8C%EC%9D%BC\" aria-label=\"1 1 password 관련 설정 파일 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>1-1. Password 관련 설정 파일</h3>\n<ul>\n<li>\n<p><strong>/etc/passwd: 계정정보 파일</strong></p>\n<ul>\n<li>login name</li>\n<li>optional encrypted password\n<ul>\n<li>x 라는 문자를 가질 경우 실제 encrypted password는 <strong>/etc/shadow</strong>에 저장</li>\n</ul>\n</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">root@ubuntu:~<span class=\"token comment\"># useradd -m -s /bin/bash smlee</span></code></pre></div>\n<p>→ 이 경우 /etc/passwd에 계정정보가 생성된다.</p>\n<p>man 명령어로 매뉴얼을 확인해보자.</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">$ <span class=\"token function\">man</span> <span class=\"token number\">5</span> <span class=\"token function\">passwd</span>\nPASSWD<span class=\"token punctuation\">(</span><span class=\"token number\">5</span><span class=\"token punctuation\">)</span>                File Formats and Conversions                PASSWD<span class=\"token punctuation\">(</span><span class=\"token number\">5</span><span class=\"token punctuation\">)</span>\n\nNAME\n       <span class=\"token function\">passwd</span> - the password <span class=\"token function\">file</span>\n\nDESCRIPTION\n       /etc/passwd contains one line <span class=\"token keyword\">for</span> each user account, with seven fields\n       delimited by colons <span class=\"token punctuation\">(</span>“:”<span class=\"token punctuation\">)</span>. These fields are:\n\n       •   login name\n\n       •   optional encrypted password\n\n       •   numerical user ID\n\n       •   numerical group ID\n\n       •   user name or comment field\n\n       •   user home directory\n\n       •   optional user <span class=\"token builtin class-name\">command</span> interpreter\n\nFILES\n       /etc/passwd\n           User account information.\n\n       /etc/shadow\n           optional encrypted password <span class=\"token function\">file</span>\n\n       /etc/passwd-\n           Backup <span class=\"token function\">file</span> <span class=\"token keyword\">for</span> /etc/passwd.\n\n           Note that this <span class=\"token function\">file</span> is used by the tools of the shadow toolsuite,\n           but not by all user and password management tools.</code></pre></div>\n</li>\n<li>\n<p><strong>/etc/shadow</strong></p>\n<ul>\n<li>\n<p>login name</p>\n</li>\n<li>\n<p>encrypted password: 암호화된 패스워드</p>\n<ul>\n<li>man으로 파일 설명 확인</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">root@ubuntu:~<span class=\"token comment\"># man 5 shadow</span>\nNAME\n       shadow - shadowed password <span class=\"token function\">file</span></code></pre></div>\n<ul>\n<li>예시</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">root@ubuntu:~<span class=\"token comment\"># cat /etc/shadow</span>\nroot:<span class=\"token variable\">$6</span><span class=\"token variable\">$jEZjezlaSvOfNIUI</span><span class=\"token variable\">$vxW</span>/3sm5U1uRzf4CPIWztVxcJ/BosEhYb6QAa.coOZPS/Va.aUgsD2zF4cSIXhdcZCd4SbP54BZqmFfXoG.2W0:19251:0:99999:7:::</code></pre></div>\n<ul>\n<li>\n<ul>\n<li>혹은 !가 들어있는 경우 로그인 금지(system account(*), password lock(!))</li>\n</ul>\n</li>\n<li>로그인 할 수 없는 계정의 비밀번호에 * / ! 가 쓰인 이유\n<ul>\n<li>암호화 알고리즘에서 절대 쓸 수 없는 문자이기 때문</li>\n</ul>\n</li>\n</ul>\n</li>\n<li>\n<p>date of last password change: 비밀번호 바꾼 날짜</p>\n<ul>\n<li>패스워드 수정일(1970.1.1을 기준으로 카운트한 날짜)</li>\n</ul>\n</li>\n<li>\n<p>minimum password age: 0이 기본값. 수정된 패스워드를 최소한으로 사용해야하는 날 수.</p>\n</li>\n<li>\n<p>maximum password age: 99999이 기본값. 수정된 패스워드를 최대 사용해야할 수 있는 날 수.</p>\n</li>\n<li>\n<p>password warning period</p>\n<ul>\n<li>만료일로부터 몇일 전부터 패스워드 변경 경고를 보낼지 설정</li>\n</ul>\n</li>\n<li>\n<p>password inactivity period</p>\n<ul>\n<li>패스워드 만료일로부터 몇 일 후부터 패스워드를 비활성화 할 지 설정(max day + inactive period)</li>\n</ul>\n</li>\n<li>\n<p>account expiration date</p>\n<ul>\n<li>account 만료일</li>\n</ul>\n</li>\n<li>\n<p>reserved field</p>\n<ul>\n<li>추후 사용을 위해 예약된 필드</li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n<h2 id=\"2-password-관리-명령어\" style=\"position:relative;\"><a href=\"#2-password-%EA%B4%80%EB%A6%AC-%EB%AA%85%EB%A0%B9%EC%96%B4\" aria-label=\"2 password 관리 명령어 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>2. Password 관리 명령어</h2>\n<h3 id=\"2-1-password-생성-passwd\" style=\"position:relative;\"><a href=\"#2-1-password-%EC%83%9D%EC%84%B1-passwd\" aria-label=\"2 1 password 생성 passwd permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>2-1. Password 생성: passwd</h3>\n<ul>\n<li><strong>passwd</strong>\n<ul>\n<li>특정 계정 사용자에게 로그인 패스워드를 할당하거나 패스워드 정책을 수정</li>\n</ul>\n</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">Usage: <span class=\"token function\">passwd</span> <span class=\"token punctuation\">[</span>options<span class=\"token punctuation\">]</span> <span class=\"token punctuation\">[</span>LOGIN<span class=\"token punctuation\">]</span>\n\nOptions:\n  -a, --all                     report password status on all accounts\n  -d, --delete                  delete the password <span class=\"token keyword\">for</span> the named account\n  -e, --expire                  force expire the password <span class=\"token keyword\">for</span> the named account\n  -h, --help                    display this <span class=\"token builtin class-name\">help</span> message and <span class=\"token builtin class-name\">exit</span>\n  -k, --keep-tokens             change password only <span class=\"token keyword\">if</span> expired\n  -i, --inactive INACTIVE       <span class=\"token builtin class-name\">set</span> password inactive after expiration\n                                to INACTIVE\n  -l, --lock                    lock the password of the named account\n  **-n, --mindays MIN_DAYS        <span class=\"token builtin class-name\">set</span> minimum number of days before password\n                                change to MIN_DAYS**\n  -q, --quiet                   quiet mode\n  -r, --repository REPOSITORY   change password <span class=\"token keyword\">in</span> REPOSITORY repository\n  -R, --root CHROOT_DIR         directory to <span class=\"token function\">chroot</span> into\n  -S, --status                  report password status on the named account\n  -u, --unlock                  unlock the password of the named account\n  **-w, --warndays WARN_DAYS      <span class=\"token builtin class-name\">set</span> expiration warning days to WARN_DAYS\n  -x, --maxdays MAX_DAYS        <span class=\"token builtin class-name\">set</span> maximum number of days before password**\n                                change to MAX_DAYS\n\n<span class=\"token comment\">## 예시 ##</span>\nroot@ubuntu:~<span class=\"token comment\"># passwd -x 30 -w 5 -n 1 smlee</span>\npasswd: password expiry information changed.\nroot@ubuntu:~<span class=\"token comment\"># cat /etc/shadow</span>\nsmlee:<span class=\"token operator\">!</span>:19252:1:30:5:::\n\n<span class=\"token comment\">## 예시 2 ##</span>\nroot@ubuntu:~<span class=\"token comment\"># usermod -e 2022-05-31 -s /bin/bash lee</span>\nroot@ubuntu:~<span class=\"token comment\"># grep lee /etc/passwd</span>\nseongmi:x:1001:1001:seong mi lee:/home/seongmi:/bin/sh\nsmlee:x:2000:2000::/home/smlee:/bin/bash\nlee:x:2001:2001::/home/lee:/bin/bash\nroot@ubuntu:~<span class=\"token comment\"># passwd lee</span>\nNew password: \nRetype new password: \npasswd: password updated successfully\nroot@ubuntu:~<span class=\"token comment\"># grep lee /etc/shadow</span>\nsmlee:<span class=\"token operator\">!</span>:19252:1:30:5:::\nlee:<span class=\"token variable\">$6</span><span class=\"token variable\">$pcn9rD2i39GR5B79</span><span class=\"token variable\">$5iYz06Et6T20VmcIskvi7dg5KxgE8bi8zM682NHWN2Nd</span>/89gWWM5HNhrMplopSpwCTLGWxL3dDeynAw9llwtq1:19256:0:99999:7::19143:</code></pre></div>\n<ul>\n<li><strong>/etc/login.defs</strong>\n<ul>\n<li>계정 생성, 패스워드를 할당할 때 default로 적용되는 값, 환경 구성</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">root@ubuntu:~<span class=\"token comment\"># cat /etc/login.defs</span>\n<span class=\"token comment\"># Password aging controls: </span>\nPASS_MAX_DAYS\t<span class=\"token number\">99999</span>\nPASS_MIN_DAYS\t<span class=\"token number\">0</span>\nPASS_WARN_AGE\t<span class=\"token number\">7</span>\n\n<span class=\"token comment\"># Min/max values for automatic uid selection in useradd</span>\nUID_MIN\t\t\t <span class=\"token number\">1000</span>\nUID_MAX\t\t\t<span class=\"token number\">60000</span>\n\n<span class=\"token comment\"># Min/max values for automatic gid selection in groupadd</span>\nGID_MIN\t\t\t <span class=\"token number\">1000</span>\nGID_MAX\t\t\t<span class=\"token number\">60000</span>\n\nUSERGROUPS_ENAB <span class=\"token function\">yes</span>\n\nENCRYPT_METHOD SHA512</code></pre></div>\n</li>\n</ul>\n<h3 id=\"2-2-password-변경-passwd\" style=\"position:relative;\"><a href=\"#2-2-password-%EB%B3%80%EA%B2%BD-passwd\" aria-label=\"2 2 password 변경 passwd permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>2-2. Password 변경: passwd</h3>\n<ul>\n<li>\n<p>passwd</p>\n<ul>\n<li>특정 계정 사용자에게 로그인 패스워드를 할당하거나 패스워드 정책을 수정</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">Usage: <span class=\"token function\">passwd</span> <span class=\"token punctuation\">[</span>options<span class=\"token punctuation\">]</span> <span class=\"token punctuation\">[</span>LOGIN<span class=\"token punctuation\">]</span>\n\nOptions:\n  -a, --all                     report password status on all accounts\n  -d, --delete                  delete the password <span class=\"token keyword\">for</span> the named account\n  **-e, --expire                  force expire the password <span class=\"token keyword\">for</span> the named account**\n  -h, --help                    display this <span class=\"token builtin class-name\">help</span> message and <span class=\"token builtin class-name\">exit</span>\n  -k, --keep-tokens             change password only <span class=\"token keyword\">if</span> expired\n  -i, --inactive INACTIVE       <span class=\"token builtin class-name\">set</span> password inactive after expiration\n                                to INACTIVE\n  -l, --lock                    lock the password of the named account\n  **-n, --mindays MIN_DAYS        <span class=\"token builtin class-name\">set</span> minimum number of days before password\n                                change to MIN_DAYS**\n  -q, --quiet                   quiet mode\n  -r, --repository REPOSITORY   change password <span class=\"token keyword\">in</span> REPOSITORY repository\n  -R, --root CHROOT_DIR         directory to <span class=\"token function\">chroot</span> into\n  -S, --status                  report password status on the named account\n  -u, --unlock                  unlock the password of the named account\n  **-w, --warndays WARN_DAYS      <span class=\"token builtin class-name\">set</span> expiration warning days to WARN_DAYS\n  -x, --maxdays MAX_DAYS        <span class=\"token builtin class-name\">set</span> maximum number of days before password**\n                                change to MAX_DAYS\n\n<span class=\"token comment\">## 예시 ##</span>\nroot@ubuntu:~<span class=\"token comment\"># passwd -x 30 -w 5- n 1 smlee</span></code></pre></div>\n<ul>\n<li>expire 옵션은 계정 비밀번호를 즉시 만료시키는 옵션 → last change date = 0 으로 변경하는 옵션</li>\n</ul>\n</li>\n<li>\n<p>예시</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">root@ubuntu:~<span class=\"token comment\"># passwd -e lee</span>\npasswd: password expiry information changed.\nroot@ubuntu:~<span class=\"token comment\"># grep lee /etc/shadow</span>\nsmlee:<span class=\"token operator\">!</span>:19252:1:30:5:::\nlee:<span class=\"token variable\">$6</span><span class=\"token variable\">$pcn9rD2i39GR5B79</span><span class=\"token variable\">$5iYz06Et6T20VmcIskvi7dg5KxgE8bi8zM682NHWN2Nd</span>/89gWWM5HNhrMplopSpwCTLGWxL3dDeynAw9llwtq1:0:0:99999:7::19143:</code></pre></div>\n</li>\n</ul>\n<h3 id=\"2-2-password-설정-변경\" style=\"position:relative;\"><a href=\"#2-2-password-%EC%84%A4%EC%A0%95-%EB%B3%80%EA%B2%BD\" aria-label=\"2 2 password 설정 변경 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>2-2. Password 설정 변경</h3>\n<ul>\n<li>\n<p><strong>chage</strong></p>\n<ul>\n<li>change user password expiry information</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">root@ubuntu:~<span class=\"token comment\"># chage --help</span>\nUsage: chage <span class=\"token punctuation\">[</span>options<span class=\"token punctuation\">]</span> LOGIN\n\nOptions:\n  -d, --lastday LAST_DAY        <span class=\"token builtin class-name\">set</span> <span class=\"token function\">date</span> of last password change to LAST_DAY\n  -E, --expiredate EXPIRE_DATE  <span class=\"token builtin class-name\">set</span> account expiration <span class=\"token function\">date</span> to EXPIRE_DATE\n  -h, --help                    display this <span class=\"token builtin class-name\">help</span> message and <span class=\"token builtin class-name\">exit</span>\n  -i, --iso8601                 use YYYY-MM-DD when printing dates\n  -I, --inactive INACTIVE       <span class=\"token builtin class-name\">set</span> password inactive after expiration\n                                to INACTIVE\n  -l, --list                    show account aging information\n  -m, --mindays MIN_DAYS        <span class=\"token builtin class-name\">set</span> minimum number of days before password\n                                change to MIN_DAYS\n  -M, --maxdays MAX_DAYS        <span class=\"token builtin class-name\">set</span> maximum number of days before password\n                                change to MAX_DAYS\n  -R, --root CHROOT_DIR         directory to <span class=\"token function\">chroot</span> into\n  -W, --warndays WARN_DAYS      <span class=\"token builtin class-name\">set</span> expiration warning days to WARN_DAYS\n\n<span class=\"token comment\">## 예시 ##</span>\nroot@ubuntu:~<span class=\"token comment\"># sudo chage -l smlee </span>\nLast password change\t\t\t\t\t<span class=\"token builtin class-name\">:</span> Sep <span class=\"token number\">17</span>, <span class=\"token number\">2022</span>\nPassword expires\t\t\t\t\t<span class=\"token builtin class-name\">:</span> Oct <span class=\"token number\">17</span>, <span class=\"token number\">2022</span>\nPassword inactive\t\t\t\t\t<span class=\"token builtin class-name\">:</span> never\nAccount expires\t\t\t\t\t\t<span class=\"token builtin class-name\">:</span> never\nMinimum number of days between password change\t\t<span class=\"token builtin class-name\">:</span> <span class=\"token number\">1</span>\nMaximum number of days between password change\t\t<span class=\"token builtin class-name\">:</span> <span class=\"token number\">30</span>\nNumber of days of warning before password expires\t<span class=\"token builtin class-name\">:</span> <span class=\"token number\">5</span>\n\n<span class=\"token comment\">## 예시 ##</span>\nroot@ubuntu:~<span class=\"token comment\"># sudo chage -M 90 -m 0 -W 7 -I 20 smlee</span>\nroot@ubuntu:~<span class=\"token comment\"># grep smlee /etc/shadow</span>\nsmlee:<span class=\"token operator\">!</span>:19252:0:90:7:20::</code></pre></div>\n</li>\n<li>\n<p><strong>usermod</strong></p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">Usage: <span class=\"token function\">usermod</span> <span class=\"token punctuation\">[</span>options<span class=\"token punctuation\">]</span> LOGIN\n\nOptions:\n  -b, --badnames                allow bad names\n  -c, --comment COMMENT         new value of the GECOS field\n  -d, --home HOME_DIR           new home directory <span class=\"token keyword\">for</span> the user account\n  -e, --expiredate EXPIRE_DATE  <span class=\"token builtin class-name\">set</span> account expiration <span class=\"token function\">date</span> to EXPIRE_DATE\n  -f, --inactive INACTIVE       <span class=\"token builtin class-name\">set</span> password inactive after expiration\n                                to INACTIVE\n  -g, --gid GROUP               force use GROUP as new primary group\n  -G, --groups <span class=\"token environment constant\">GROUPS</span>           new list of supplementary <span class=\"token environment constant\">GROUPS</span>\n  -a, --append                  append the user to the supplemental <span class=\"token environment constant\">GROUPS</span>\n                                mentioned by the -G option without removing\n                                the user from other <span class=\"token function\">groups</span>\n  -h, --help                    display this <span class=\"token builtin class-name\">help</span> message and <span class=\"token builtin class-name\">exit</span>\n  -l, --login NEW_LOGIN         new value of the login name\n  **-L, --lock                    lock the user account**\n  -m, --move-home               move contents of the home directory to the\n                                new location <span class=\"token punctuation\">(</span>use only with -d<span class=\"token punctuation\">)</span>\n  -o, --non-unique              allow using duplicate <span class=\"token punctuation\">(</span>non-unique<span class=\"token punctuation\">)</span> <span class=\"token environment constant\">UID</span>\n  -p, --password PASSWORD       use encrypted password <span class=\"token keyword\">for</span> the new password\n  -R, --root CHROOT_DIR         directory to <span class=\"token function\">chroot</span> into\n  -P, --prefix PREFIX_DIR       prefix directory where are located the /etc/* files\n  -s, --shell <span class=\"token environment constant\">SHELL</span>             new login shell <span class=\"token keyword\">for</span> the user account\n  -u, --uid <span class=\"token environment constant\">UID</span>                 new <span class=\"token environment constant\">UID</span> <span class=\"token keyword\">for</span> the user account\n  **-U, --unlock                  unlock the user account**\n  -v, --add-subuids FIRST-LAST  <span class=\"token function\">add</span> range of subordinate uids\n  -V, --del-subuids FIRST-LAST  remove range of subordinate uids\n  -w, --add-subgids FIRST-LAST  <span class=\"token function\">add</span> range of subordinate gids\n  -W, --del-subgids FIRST-LAST  remove range of subordinate gids\n  -Z, --selinux-user SEUSER     new SELinux user mapping <span class=\"token keyword\">for</span> the user account</code></pre></div>\n<ul>\n<li>lock &#x26; unlock → passwd라는 명령어로도 가능 (lock 명령어 적용시 /etc/shadow 의 해당 유저란에 !가 붙게 된다)</li>\n</ul>\n</li>\n</ul>\n<br/>","frontmatter":{"date":"September 25, 2022","title":"리눅스(Linux) Password Administration","categories":"데브옵스","author":"jinnypark9393","emoji":"💫"},"fields":{"slug":"/220925-devops-linux-password-administration/"}},"prev":null,"site":{"siteMetadata":{"siteUrl":"https://jinnypark9393.github.io","comments":{"utterances":{"repo":"jinnypark9393/jinnypark9393.github.io"}}}}},"pageContext":{"slug":"/220926-devops-linux-manage-file-permissions/","nextSlug":"/220925-devops-linux-password-administration/","prevSlug":""}},"staticQueryHashes":["1073350324","1956554647","2938748437"]}